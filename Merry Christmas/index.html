<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ„ Merry Christmas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module"
 src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
body {
  margin: 0;
  background: black;
  font-family: system-ui, sans-serif;
}

/* UI INSIDE AR */
.ar-ui {
  color: white;
  text-align: center;
  pointer-events: auto;
}

#message {
  font-size: 1.4rem;
  text-shadow: 0 0 10px black;
}

#giftBtn, #captureBtn {
  margin-top: 10px;
  padding: 10px 18px;
  border-radius: 20px;
  border: none;
  background: crimson;
  color: white;
  font-size: 16px;
}

/* Snow */
.snow {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.snow span {
  position: absolute;
  color: white;
  animation: fall linear infinite;
}
@keyframes fall {
  to { transform: translateY(110vh); }
}
</style>
</head>

<body>

<model-viewer
  id="ar"
  src="tree.glb"
  ar
  ar-modes="webxr scene-viewer quick-look"
  camera-controls
  auto-rotate
  rotation-per-second="10deg"
  scale="2 2 2"
  shadow-intensity="1"
  style="width:100vw; height:100vh;">

  <!-- ğŸŒ¨ SNOW SLOT -->
  <div slot="poster" class="snow">
    <span style="left:10%; animation-duration:7s;">â„</span>
    <span style="left:40%; animation-duration:9s;">â„</span>
    <span style="left:70%; animation-duration:8s;">â„</span>
  </div>

  <!-- ğŸ„ TEXT SLOT -->
  <div slot="ar-status" class="ar-ui">
    <div id="message">ğŸ„ Merry Christmas from Shivam âœ¨</div>
    <button id="giftBtn">ğŸ Tap Gift</button><br>
    <button id="captureBtn">ğŸ“¸ Capture</button>
  </div>

</model-viewer>

<audio id="jingle" src="jingle.mp3"></audio>

<script>
const giftBtn = document.getElementById("giftBtn");
const msg = document.getElementById("message");
const jingle = document.getElementById("jingle");

giftBtn.onclick = () => {
  jingle.play();
  msg.innerText = "ğŸ Surprise! Wishing you joy & happiness âœ¨";
};

document.getElementById("captureBtn").onclick = async () => {
  const viewer = document.getElementById("ar");
  const blob = await viewer.toBlob();
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "christmas-ar.png";
  a.click();
};
</script>

</body>
</html>
